import{r as b,X as E,b as k,f as F,j as I,Y as S}from"./index-Bng6fhKM.js";function w(c){const{loading:a,src:o,srcSet:s,onLoad:r,onError:t,crossOrigin:i,sizes:g,ignoreFallback:u}=c,[l,f]=b.useState("pending");b.useEffect(()=>{f(o?"loading":"pending")},[o]);const n=b.useRef(null),h=b.useCallback(()=>{if(!o)return;d();const e=new Image;e.src=o,i&&(e.crossOrigin=i),s&&(e.srcset=s),g&&(e.sizes=g),a&&(e.loading=a),e.onload=m=>{d(),f("loaded"),r==null||r(m)},e.onerror=m=>{d(),f("failed"),t==null||t(m)},n.current=e},[o,i,s,g,r,t,a]),d=()=>{n.current&&(n.current.onload=null,n.current.onerror=null,n.current=null)};return E(()=>{if(!u)return l==="loading"&&h(),()=>{d()}},[l,h,u]),u?"loaded":l}const y=(c,a)=>c!=="loaded"&&a==="beforeLoadOrError"||c==="failed"&&a==="onError",O=k("div");O.displayName="Box";const p=F(function(a,o){const{htmlWidth:s,htmlHeight:r,alt:t,...i}=a;return I.jsx("img",{width:s,height:r,ref:o,alt:t,...i})});p.displayName="NativeImage";const R=F(function(a,o){const{fallbackSrc:s,fallback:r,src:t,srcSet:i,align:g,fit:u,loading:l,ignoreFallback:f,crossOrigin:n,fallbackStrategy:h="beforeLoadOrError",referrerPolicy:d,...e}=a,m=s!==void 0||r!==void 0,x=l!=null||f||!m,N=w({...a,crossOrigin:n,ignoreFallback:x}),j=y(N,h),v={ref:o,objectFit:u,objectPosition:g,...x?e:S(e,["onError","onLoad"])};return j?r||I.jsx(k.img,{as:p,className:"chakra-image__placeholder",src:s,...v}):I.jsx(k.img,{as:p,src:t,srcSet:i,crossOrigin:n,loading:l,referrerPolicy:d,className:"chakra-image",...v})});R.displayName="Image";export{O as B,R as I};
